<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Learn and live."><title>javascript之DOM操作 | Simple &amp; Freedom</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">javascript之DOM操作</h1><a id="logo" href="/.">Simple &amp; Freedom</a><p class="description">Learn and live.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/404.html"><i class="fa fa-heartbeat"> 公益404</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">javascript之DOM操作</h1><div class="post-meta">Dec 8, 2017<span> | </span><span class="category"><a href="/categories/js/">js</a></span></div><div class="post-content"><h3 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h3><p>DOM是一个树形结构, 常用操作有:更新, 遍历, 添加, 删除</p>
<p>获取dom节点的方法:<br>document.getElementById()<br>document.getElementsByTagName()<br>document.getElementsByClassName() //CSS选择器<br>可以连续调用: <code>var trs = document.getElementById(&#39;test-table&#39;).getElementsByTagName(&#39;tr&#39;);</code></p>
<p>使用selector语法:<br>querySelector()<br>querySelectorAll()<br><strong>注意:</strong> 低版本的IE&lt;8不支持querySelector和querySelectorAll。IE8仅有限支持。</p>
<p>根节点Document已经自动绑定为全局变量document。<br>严格地讲，我们这里的DOM节点是指Element，但是DOM节点实际上是Node，<br>在HTML中，Node包括Element、Comment、CDATA_SECTION等很多种，以及根节点Document类型，但是，绝大多数时候我们只关心Element.</p>
<h3 id="更新DOM"><a href="#更新DOM" class="headerlink" title="更新DOM"></a>更新DOM</h3><p>直接修改节点的文本，方法有两种:</p>
<ol>
<li><p>修改innerHTML属性，这个方式非常强大，不但可以修改一个DOM节点的文本内容，还可以直接通过HTML片段修改DOM节点内部的子树.<br><strong>注意:</strong> 在写入HTML。如果写入的字符串是通过网络拿到了，要注意对字符编码来避免XSS攻击。</p>
</li>
<li><p>修改innerText或textContent属性，这样可以自动对字符串进行HTML编码，保证无法设置任何HTML标签.<br>innerText不返回隐藏元素的文本，而textContent返回所有文本。另外注意IE&lt;9不支持textContent。</p>
</li>
</ol>
<p>DOM节点的style属性对应所有的CSS，可以直接获取或设置。<br><strong>注意:</strong>CSS允许font-size这样的名称，但它并非JavaScript有效的属性名，需要在JavaScript中改写为驼峰式命名fontSize.</p>
<h3 id="插入DOM"><a href="#插入DOM" class="headerlink" title="插入DOM"></a>插入DOM</h3><p>两个办法可以插入新的节点</p>
<ol>
<li>使用appendChild，把一个子节点添加到父节点的最后一个子节点</li>
<li>使用insertBefore, 使用parentElement.insertBefore(newElement, referenceElement);，子节点会插入到referenceElement之前。</li>
</ol>
<h3 id="删除DOM"><a href="#删除DOM" class="headerlink" title="删除DOM"></a>删除DOM</h3><ol>
<li>调用父节点的removeChild把当前节点删掉<br><strong>注意:</strong>删除后的节点虽然不在文档树中了，但其实它还在内存中，可以随时再次被添加到别的位置</li>
</ol>
<p>当遍历一个父节点的子节点并进行删除操作时，要注意，children属性是一个<strong>只读</strong>属性，并且它在子节点变化时会实时更新<br>删除多个节点时，要注意children属性时刻都在变化, 容易造成index溢出.</p>
<h3 id="表单操作"><a href="#表单操作" class="headerlink" title="表单操作"></a>表单操作</h3><p>HTML表单的输入控件主要有以下几种：</p>
<ul>
<li>文本框，对应的<input type="text">，用于输入文本；</li>
<li>口令框，对应的<input type="password">，用于输入口令；</li>
<li>单选框，对应的<input type="radio">，用于选择一项；</li>
<li>复选框，对应的<input type="checkbox">，用于选择多项；</li>
<li>下拉框，对应的<select>，用于选择一项；</select></li>
<li>隐藏文本，对应的<input type="hidden">，用户不可见，但表单提交时会把隐藏文本发送到服务器。</li>
</ul>
<p>直接调用value获得对应的用户输入值, <code>input.value; // &#39;用户输入的值&#39;</code><br>对于单选框和复选框，value属性返回的永远是HTML预设的值，要获得的实际是用户是否“勾上了”选项，应该用checked判断.</p>
<h3 id="HTML5控件"><a href="#HTML5控件" class="headerlink" title="HTML5控件"></a>HTML5控件</h3><p>HTML5新增了大量标准控件，常用的包括date、datetime、datetime-local、color等，它们都使用<code>&lt;input&gt;</code>标签.<br>不支持HTML5的浏览器无法识别新的控件，会把它们当做type=”text”来显示。支持HTML5的浏览器将获得格式化的字符串</p>
<h3 id="提交表单"><a href="#提交表单" class="headerlink" title="提交表单"></a>提交表单</h3><p>第一种方式:通过<code>&lt;form&gt;</code>元素的submit()方法提交一个表单, 这种方式的缺点是扰乱了浏览器对form的正常提交。<br>浏览器默认点击<code>&lt;button type=&quot;submit&quot;&gt;</code>或用户在最后一个输入框按回车键时提交表单。</p>
<p>第二种方式:响应<code>&lt;form&gt;</code>本身的onsubmit事件，在提交form时作修改.<br>出于安全考虑，提交表单时不传输明文口令，而是口令的MD5, 口令框的显示会突然从几个<code>*</code>变成32个<code>*</code>,(MD5有32个字符)<br>要想不改变用户的输入，可以利用<code>&lt;input type=&quot;hidden&quot;&gt;</code>实现.</p>
<p>注意到id为md5-password的<code>&lt;input&gt;</code>标记了name=”password”，而用户输入的id为input-password的<code>&lt;input&gt;</code>没有name属性。<br>没有name属性的<code>&lt;input&gt;</code>的数据不会被提交。</p>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p>在HTML表单中，可以上传文件的唯一控件就是<code>&lt;input type=&quot;file&quot;&gt;</code><br><strong>注意：</strong> 当一个表单包含<code>&lt;input type=&quot;file&quot;&gt;</code>时，表单的enctype必须指定为multipart/form-data，method必须指定为post，<br>这样浏览器才能正确编码并以multipart/form-data格式发送表单的数据。<br>出于安全考虑，浏览器只允许用户点击<code>&lt;input type=&quot;file&quot;&gt;</code>来选择本地文件，用JavaScript对<code>&lt;input type=&quot;file&quot;&gt;</code>的value赋值是没有任何效果的。当用户选择了上传某个文件后，JavaScript也无法获得该文件的真实路径</p>
<p>File API<br>随着HTML5的普及，新增的File API允许JavaScript读取文件内容，获得更多的文件信息。<br>HTML5的File API提供了File和FileReader两个主要对象，可以获得文件信息并读取文件。</p>
<h3 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h3><p>浏览器的JavaScript执行引擎在执行JavaScript代码时，总是以单线程模式执行，<br>也就是说，任何时候，JavaScript代码都不可能同时有多于1个线程在执行.<br>在JavaScript中，执行多任务实际上都是异步调用.</p>
<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>Asynchronous JavaScript and XML，意思就是用JavaScript执行异步网络请求。<br>通过检测window对象是否有XMLHttpRequest属性来确定浏览器是否支持标准的XMLHttpRequest,<br>不要根据浏览器的navigator.userAgent来检测浏览器是否支持某个JavaScript特性.</p>
<h3 id="安全限制"><a href="#安全限制" class="headerlink" title="安全限制"></a>安全限制</h3><p>由于浏览器的同源策略,默认情况下，JavaScript在发送AJAX请求时，URL的域名必须和当前页面完全一致,<br>即域名,协议和端口号要一致.有的浏览器可能允许端口不同.<br>那是不是用JavaScript无法请求外域（就是其他网站）的URL了呢？方法还是有的，大概有这么几种：<br>一是: 通过Flash插件发送HTTP请求，这种方式可以绕过浏览器的安全限制，但必须安装Flash，并且跟Flash交互。不过Flash用起来麻烦，而且现在用得也越来越少了。<br>二是:通过在同源域名下架设一个代理服务器来转发，JavaScript负责把请求发送到代理服务器,代理服务器再把结果返回，这样就遵守了浏览器的同源策略。这种方式麻烦之处在于需要服务器端额外做开发。<br>第三种方式称为JSONP，它有个限制，只能用GET请求，并且要求返回JavaScript。这种方式跨域实际上是利用了浏览器允许跨域引用JavaScript资源.JSONP通常以函数调用的形式返回</p>
<p>CORS(Cross-Origin Resource Sharing): 是HTML5规范定义的如何跨域访问资源<br>Origin表示本域，也就是浏览器当前页面的域。当JavaScript向外域（如sina.com）发起请求后，浏览器收到响应后，首先检查Access-Control-Allow-Origin是否包含本域，如果是，则此次跨域请求成功，如果不是，则请求失败，JavaScript将无法获取到响应的任何数据。<br>假设本域是my.com，外域是sina.com，只要响应头Access-Control-Allow-Origin为<code>http://my.com</code>，或者是<code>*</code>，本次请求就可以成功。<br>可见，跨域能否成功，取决于对方服务器是否愿意给你设置一个正确的Access-Control-Allow-Origin，决定权始终在对方手中。</p>
<h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><p>Promise最大的好处是在异步执行的流程中，把执行代码和处理结果的代码清晰地分离了.<br>Promise还可以做更多的事情，比如，有若干个异步任务，需要先做任务1，如果成功后再做任务2，任何任务失败则不再继续并执行错误处理函数。<br><code>job1.then(job2).then(job3).catch(handleError);</code> ,其中，job1、job2和job3都是Promise对象。</p>
<h3 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h3><p>Canvas是HTML5新增的组件，它就像一块幕布，可以用JavaScript在上面绘制各种图表、动画等。<br>没有Canvas的年代，绘图只能借助Flash插件实现，页面不得不用JavaScript和Flash进行交互。<br>有了Canvas，我们就再也不需要Flash了，直接使用JavaScript完成绘制。</p>
</div><div class="tags"><a href="/tags/js/">js</a></div><div class="post-nav"><a href="/2017/12/08/jQuery-notes1-2017-12-08/" class="pre">jQuery笔记</a><a href="/2017/12/08/appium-notes1-2017-12-08/" class="next">Appium笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/思想/">思想</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/node-js/" style="font-size: 15px;">node.js</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/计算机基础/" style="font-size: 15px;">计算机基础</a> <a href="/tags/C-C/" style="font-size: 15px;">C/C++</a> <a href="/tags/谷歌/" style="font-size: 15px;">谷歌</a> <a href="/tags/OOP/" style="font-size: 15px;">OOP</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/Flask/" style="font-size: 15px;">Flask</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/方法/" style="font-size: 15px;">方法</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/NSIS/" style="font-size: 15px;">NSIS</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/PyQt5/" style="font-size: 15px;">PyQt5</a> <a href="/tags/Scrapy/" style="font-size: 15px;">Scrapy</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/RegExp/" style="font-size: 15px;">RegExp</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/tornado/" style="font-size: 15px;">tornado</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/08/jQuery-notes1-2017-12-08/">jQuery笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/08/js-dom-2017-12-08/">javascript之DOM操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/08/appium-notes1-2017-12-08/">Appium笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/08/js-object-2017-12-08/">javascript 标准对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/07/selenium-notes1-2017-12-07/">selenium笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/js-notes2-2017-12-04/">javascript笔记(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/28/proxy-2017-11-28/">proxy一些知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/25/redis-note1-2017-11-25/">redis笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/16/tornado-note2-2017-11-16/">tornado学习笔记(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/16/howtoreadsource-2017-11-16/">如何去阅读源码</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Simple &amp; Freedom.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>