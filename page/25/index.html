<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Simple & Freedom" type="application/atom+xml" />






<meta name="description" content="Learn and live.">
<meta property="og:type" content="website">
<meta property="og:title" content="Simple &amp; Freedom">
<meta property="og:url" content="http://arvin-he.github.io/page/25/index.html">
<meta property="og:site_name" content="Simple &amp; Freedom">
<meta property="og:description" content="Learn and live.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simple &amp; Freedom">
<meta name="twitter:description" content="Learn and live.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://arvin-he.github.io/page/25/"/>





  <title>Simple & Freedom</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Simple & Freedom</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Learn and live.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://arvin-he.github.io/2017/04/12/flask-DB-2017-04-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arvin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simple & Freedom">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/12/flask-DB-2017-04-12/" itemprop="url">Flask之数据库使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-12T20:29:07+08:00">
                2017-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-Flask-中的数据库"><a href="#1-Flask-中的数据库" class="headerlink" title="1. Flask 中的数据库"></a>1. Flask 中的数据库</h3><p>使用 Flask-SQLAlchemy 扩展来管理应用程序的数据。这个扩展封装了SQLAlchemy项目，这是一个 对象关系映射器或者ORM。</p>
<h3 id="2-数据库迁移"><a href="#2-数据库迁移" class="headerlink" title="2. 数据库迁移"></a>2. 数据库迁移</h3><p>使用 SQLAlchemy-migrate 来跟踪数据库的更新。它只是在开始建立数据库的时候多花费些工作.<br>SQLAlchemy-migrate 包自带命令行和 APIs，这些 APIs 以一种将来允许容易升级的方式来创建数据库。<br>一个空的 sqlite 数据库，创建一开始就支持迁移。同样你还将有一个 db_repository 文件夹，里面还有一些文件，这是 SQLAlchemy-migrate 存储它的数据文件的地方。<br>请注意，我们不会再生的存储库，如果它已经存在。这将使我们重新创建数据库，同时保留现有的存储库，如果我们需要。<br>SQLAlchemy-migrate 迁移的方式就是比较数据库(在本例中从 app.db 中获取)与我们模型的结构(从文件 app/models.py 获取)。两者间的不同将会被记录成一个迁移脚本存放在迁移仓库中。迁移脚本知道如何去迁移或撤销它，所以它始终是可能用于升级或降级一个数据库。</p>
<p>在使用脚本自动地完成迁移的时候也不是没有问题的，有时候它很难识别新老格式的变化。为了让 SQLAlchemy-migrate 容易地识别出变化，绝不要重命名存在的字段，仅限于增加或者删除模型或者字段，或者改变已存在字段的类型。当然我一直会检查生成的迁移脚本，确保它是正确。<br>不应该在没有备份下去尝试迁移数据库。当然也不能在生产环境下直接运行迁移脚本，必须在开发环境下确保迁移运转正常。</p>
<h3 id="3-数据库配置"><a href="#3-数据库配置" class="headerlink" title="3. 数据库配置"></a>3. 数据库配置</h3><p>小型的应用，采用 sqlite 数据库。sqlite 数据库是小型应用的最方便的选择，每一个数据库都是存储在单个文件里。大型的可以采用MySql.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import os</div><div class="line">basedir = os.path.abspath(os.path.dirname(__file__))</div><div class="line"></div><div class="line">SQLALCHEMY_DATABASE_URI = &apos;sqlite:///&apos; + os.path.join(basedir, &apos;app.db&apos;)</div><div class="line">SQLALCHEMY_MIGRATE_REPO = os.path.join(basedir, &apos;db_repository&apos;)</div></pre></td></tr></table></figure></p>
<p>SQLALCHEMY_DATABASE_URI 是 Flask-SQLAlchemy 扩展需要的。这是数据库文件的路径。<br>SQLALCHEMY_MIGRATE_REPO 是文件夹，把 SQLAlchemy-migrate 数据文件存储在这里。</p>
<h3 id="4-数据库模型"><a href="#4-数据库模型" class="headerlink" title="4. 数据库模型"></a>4. 数据库模型</h3><p>存储在数据库中数据将会以类的集合来表示，称之为数据库模型。ORM 层需要做的翻译就是将从这些类创建的对象映射到适合的数据库表的行.</p>
<h3 id="5-数据库升级和回退"><a href="#5-数据库升级和回退" class="headerlink" title="5. 数据库升级和回退"></a>5. 数据库升级和回退</h3><p>假设有一个应用程序在开发机器上，同时有一个拷贝部署在到线上的生产机器上。在下一个版本中，你的数据模型有一个变化，比如新增了一个表。如果没有迁移脚本，可能必须要琢磨着如何修改数据库格式在开发和生产机器上，这会花费很大的工作。</p>
<p>如果有数据库迁移的支持，当准备发布新版的时候，只需要录制一个新的迁移，拷贝迁移脚本到生产服务器上接着运行脚本，所有事情就完成了。数据库升级也只需要一点 Python 脚本(文件 db_upgrade.py):<br>当你运行上述脚本的时候，数据库将会升级到最新版本。<br>通常情况下，没有必要把数据库降低到旧版本，但是，SQLAlchemy-migrate 支持这么做(文件 db_downgrade.py)<br>这个脚本会回退数据库一个版本。你可以运行多次来回退多个版本。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://arvin-he.github.io/2017/04/10/flask-wtf-2017-04-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arvin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simple & Freedom">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/10/flask-wtf-2017-04-10/" itemprop="url">Flask表单</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-10T22:27:56+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>处理 web 表单，我们将使用 Flask-WTF扩展.<br>在 Flask-WTF 中，表单是表示成对象，Form 类的子类。一个表单子类简单地把表单的域定义成类的变量。</p>
<h3 id="1-配置Flask-WTF"><a href="#1-配置Flask-WTF" class="headerlink" title="1. 配置Flask-WTF"></a>1. 配置Flask-WTF</h3><p>Flaks-WTF 扩展只需要两个配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CSRF_ENABLED = True</div><div class="line">SECRET_KEY = &apos;you-will-never-guess&apos;</div></pre></td></tr></table></figure></p>
<p>CSRF_ENABLED 配置是为了激活跨站点请求伪造保护。在大多数情况下，你需要激活该配置使得你的应用程序更安全些。<br>SECRET_KEY 配置仅仅当 CSRF 激活的时候才需要，它是用来建立一个加密的令牌，用于验证一个表单。当你编写自己的应用程序的时候，请务必设置很难被猜测到密钥。</p>
<h3 id="2-用户登录表单"><a href="#2-用户登录表单" class="headerlink" title="2. 用户登录表单"></a>2. 用户登录表单</h3><p>创建一个登录表单，用户用于认证系统,我们导入 Form 类，接着导入两个我们需要的字段类，TextField 和 BooleanField。DataRequired 验证器只是简单地检查相应域提交的数据是否是空。在 Flask-WTF 中有许多的验证器.</p>
<h3 id="3-登录表单模板"><a href="#3-登录表单模板" class="headerlink" title="3. 登录表单模板"></a>3. 登录表单模板</h3><p>重用base.html 模板通过 extends 模板继承声明语句,好处是以确保所有网页的布局一致性。<br>模板与常规的 HTML 表单之间存在一些不同处。模板期望一个实例化自我们刚才创建地表单类的表单对象储存成一个模板参数，称为 form。当我们编写渲染这个模板的视图函数的时候，我们将会特别注意传送这个模板参数到模板中。<br>form.hidden_tag() 模板参数将被替换为一个隐藏字段，用来是实现在配置中激活的 CSRF 保护.如果你已经激活了 CSRF，这个字段需要出现在你所有的表单中。</p>
<h3 id="4-表单视图"><a href="#4-表单视图" class="headerlink" title="4. 表单视图"></a>4. 表单视图</h3><p>导入 LoginForm 类，从这个类实例化一个对象，接着把它传入到模板中。这就是我们渲染表单所有要做的。<br>注意:路由装饰器的 methods 参数。参数告诉 Flask 这个视图函数接受 GET 和 POST 请求。如果不带参数的话，视图只接受 GET 请求。</p>
<h3 id="5-接收表单数据"><a href="#5-接收表单数据" class="headerlink" title="5. 接收表单数据"></a>5. 接收表单数据</h3><p>Flask-WTF 使得工作变得简单的另外一点就是处理提交的数据.form表单对象中validate_on_submit 方法做了所有表单处理工作</p>
<p>当表单正在展示给用户的时候调用它，它会返回 False.</p>
<p>如果 validate_on_submit 在表单提交请求中被调用，它将会收集所有的数据，对字段进行验证，如果所有的事情都通过的话，它将会返回 True，表示数据都是合法的。这就是说明数据是安全的，并且被应用程序给接受了。</p>
<p>如果至少一个字段验证失败的话，它将会返回 False，接着表单会重新呈现给用户，这也将给用户一次机会去修改错误。</p>
<h3 id="6-加强字段验证"><a href="#6-加强字段验证" class="headerlink" title="6. 加强字段验证"></a>6. 加强字段验证</h3><p>加强字段验证是为了提示用户表单哪里出错了.当字段验证失败的时候， Flask-WTF 会向表单对象中添加描述性的错误信息。这些信息是可以在模板中使用的，因此我们只需要增加一些逻辑来获取它。<br>通常情况下，任何需要验证的字段都会把错误信息放入 form.field_name.errors 下。在我们的例子中，我们使用 form.openid.errors 。我们以红色的字体颜色显示这些错误信息以引起用户的注意。</p>
<h3 id="7-处理-OpenIDs"><a href="#7-处理-OpenIDs" class="headerlink" title="7. 处理 OpenIDs"></a>7. 处理 OpenIDs</h3><p>一些大的互联网服务提供商支持 OpenID 认证自己的会员。比如，如果你有一个 Google 的账号，你也就有了一个它们的 OpenID</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://arvin-he.github.io/2017/04/09/mysql-cmds-2017-04-09/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arvin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simple & Freedom">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/09/mysql-cmds-2017-04-09/" itemprop="url">MySQL基本命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-09T16:45:44+08:00">
                2017-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="MySQL基本命令"><a href="#MySQL基本命令" class="headerlink" title="MySQL基本命令"></a>MySQL基本命令</h3><ol>
<li>创建一个数据库:<code>create database gogs;</code></li>
<li>显示所有数据库:<code>show databases;</code></li>
<li>使用指定数据库:<code>use gogs;</code></li>
<li>创建表:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE pages (id BIGINT(7) NOT NULL AUTO_INCREMENT, title VARCHAR(200),</div><div class="line">content VARCHAR(10000), created TIMESTAMP DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY</div><div class="line">(id));</div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>注意:</strong>mysql数据表必须至少有一列,否则不能创建.<br>每个字段定义由三部分组成：</p>
<ul>
<li>名称（ id 、 title 、 created 等）</li>
<li>数据类型（ BIGINT(7) 、 VARCHAR 、 TIMESTAMP ）</li>
<li>其他可选属性（ NOT NULL AUTO_INCREMENT ）<br>在字段定义列表的最后，还要定义一个“主键”（key）.</li>
</ul>
<ol>
<li>查看数据表的结构:<code>describe pages;</code></li>
<li>插入数据:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">insert into pages (title, content) VALUES (&quot;Test page title&quot;, &quot;This is some te</div><div class="line">st page content. It can be up to 10,000 characters long.&quot;);</div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>注意:</strong> pages 表里有四个字段（ id 、 title 、 content 、 created ），但实际上<br>你只需要插入两个字段（ title 和 content ）的数据即可。因为 id 字段是自动递增的（每<br>次新插入数据行时 MySQL 自动增加 1），通常不用处理。另外， created 字段的类型是<br>timestamp ，默认就是数据加入时的时间戳。</p>
<ol>
<li><p>查询数据:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 精确查询</div><div class="line">select * from pages where id = 2;</div><div class="line"># 模糊查询</div><div class="line">select * from pages where title like &quot;%test%&quot;;</div><div class="line"># 返回部分字段查询</div><div class="line">select id, title from pages where content like &quot;%page content%&quot;;</div></pre></td></tr></table></figure>
</li>
<li><p>删除数据:<code>delete from pages where id = 1;</code></p>
</li>
<li>更新数据:<code>update pages set title=&quot;a new title&quot;, content=&quot;some new content&quot; where id=2;</code></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://arvin-he.github.io/2017/04/07/mysqlsetup-2017-04-07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arvin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simple & Freedom">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/07/mysqlsetup-2017-04-07/" itemprop="url">MySQL免安装配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-07T15:56:03+08:00">
                2017-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-MySQL下载"><a href="#1-MySQL下载" class="headerlink" title="1. MySQL下载"></a>1. MySQL下载</h3><p>下载mysql-5.7.17-winx64.zip,32位机器下载mysql-5.7.17-wix32.zip,<br>不要下载mysql-installer-community-5.7.17.0.msi.<br><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">mysql下载链接</a></p>
<h3 id="2-解压mysql"><a href="#2-解压mysql" class="headerlink" title="2. 解压mysql"></a>2. 解压mysql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#解压目录</div><div class="line">D:\Program Files\mysql-5.7.17-winx64</div></pre></td></tr></table></figure>
<h3 id="3-配置mysql"><a href="#3-配置mysql" class="headerlink" title="3. 配置mysql"></a>3. 配置mysql</h3><ol>
<li>在mysql解压目录下复制my-default.ini,放到mysql的解压目录,并重命名为my.ini.</li>
<li>my.ini里修改为<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[client]</div><div class="line"># port=3306</div><div class="line">default-character-set = utf8</div><div class="line"></div><div class="line">[mysql]</div><div class="line">default-character-set = utf8</div><div class="line"></div><div class="line">[mysqld]</div><div class="line"># basedir 为安装文件解压后的目录 ｜ basedir和datadir 可以使用相对路径</div><div class="line">basedir = D:/Program Files/mysql-5.7.17-winx64</div><div class="line"># datadir 为用来存放数据的目录</div><div class="line">datadir = D:/Program Files/mysql-5.7.17-winx64/data</div><div class="line">character_set_server = utf8</div><div class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4-添加mysql的环境变量"><a href="#4-添加mysql的环境变量" class="headerlink" title="4. 添加mysql的环境变量"></a>4. 添加mysql的环境变量</h3><p>将<code>D:\Program Files\mysql-5.7.17-winx64\bin</code>添加到环境变量.</p>
<h3 id="5-将mysql注册为windows系统服务"><a href="#5-将mysql注册为windows系统服务" class="headerlink" title="5. 将mysql注册为windows系统服务"></a>5. 将mysql注册为windows系统服务</h3><ol>
<li>从控制台中进入到mysql解压目录下的bin目录</li>
<li>输入命令:<code>mysqld -install</code></li>
</ol>
<h3 id="6-初始化mysql数据目录"><a href="#6-初始化mysql数据目录" class="headerlink" title="6. 初始化mysql数据目录"></a>6. 初始化mysql数据目录</h3><p><strong>注意:</strong>mysql5.7解压后没有数据目录,即在解压目录中没有data文件夹.这会导致启动mysql服务失败.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --defaults-file=&quot;D:\Program Files\mysql-5.7.17-winx64\my.ini&quot; --initialize-insecure</div></pre></td></tr></table></figure></p>
<ol>
<li>它会初始化 data 目录，在执行此命令前请先把data目录下的所有文件先删除，否则会失败.</li>
<li>可以选择用 –initialize-insecure 或者 –initialize 来初始化，–initialize-insecure 初始化root密码为空，如果用 –initialize来初始化，会产生一个随机密码.</li>
<li>执行成功后，在data目录下会生成mysql，perofrmance_schema，sys等目录文件.</li>
</ol>
<h3 id="7-启动mysql服务"><a href="#7-启动mysql服务" class="headerlink" title="7. 启动mysql服务"></a>7. 启动mysql服务</h3><p>在控制台输入:<code>net start mysql</code></p>
<h3 id="8-mysql一些命令"><a href="#8-mysql一些命令" class="headerlink" title="8. mysql一些命令"></a>8. mysql一些命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#安装服务</div><div class="line">mysqld -install</div><div class="line"></div><div class="line">#启动服务</div><div class="line">net start mysql</div><div class="line"></div><div class="line">#进入mysql</div><div class="line">mysql -u root -p</div><div class="line"></div><div class="line">#移除mysql服务</div><div class="line">mysqld -remove</div><div class="line"></div><div class="line">#停止服务</div><div class="line">net stop mysql</div></pre></td></tr></table></figure>
<h3 id="9-修改root帐号密码"><a href="#9-修改root帐号密码" class="headerlink" title="9. 修改root帐号密码"></a>9. 修改root帐号密码</h3><p>刚安装完成时root账号默认密码为空，此时可以将密码修改为指定的密码。如：123456<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;mysql –u root</div><div class="line"> mysql&gt;show databases;  # 注意:分号不能丢</div><div class="line"> mysql&gt;use mysql; # 使用sql数据库,这个是初始化data目录自动生成的</div><div class="line"> mysql&gt;set password=password(&apos;123456&apos;); # 修改密码</div><div class="line"> mysql&gt;FLUSH PRIVILEGES;</div><div class="line"> mysql&gt;QUIT</div></pre></td></tr></table></figure></p>
<h3 id="10-一些其他命令"><a href="#10-一些其他命令" class="headerlink" title="10. 一些其他命令"></a>10. 一些其他命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p #-u表示用户, -p表示需要输入密码</div></pre></td></tr></table></figure>
<h3 id="11-一些问题"><a href="#11-一些问题" class="headerlink" title="11. 一些问题"></a>11. 一些问题</h3><ol>
<li>MYSQL服务无法启动<br>MYSQL服务无法启动的原因是:没有初始化mysql数据目录,mysql5.7解压后,在解压目录中没有data文件夹.</li>
</ol>
<p>解决方法:<br>在bin目录下输入命令:<code>mysqld --initialize-insecure --user=mysql</code>,然后在mysql根目录下会自动生成一个data文件夹.</p>
<ol>
<li>Error 1045: Access denied for user ‘root’@’localhost’ (using password: YES)<br>解决方法:</li>
</ol>
<ul>
<li><blockquote>
<p>net stop mysql  (停用MySQL服务,没启动的可以省略)</p>
</blockquote>
</li>
<li>找到安装路径 MySQL Server 5.7下的my.ini打开 my.ini,找到  [mysqld]  然后在下面加上<br>这句： skip_grant_tables （意思好像是 启动MySQL服务的时候跳过权限表认证  ）</li>
<li>启动数据库修改密码了   <blockquote>
<p>  net start mysql   (启动MySQL服务)—&gt;   mysql  回车   (如果成功，将出现MySQL提示符)</p>
</blockquote>
</li>
<li>输入use mysql; （连接权限数据库）。</li>
<li>改密码：update user set authentication_string=password(“123”) where user=”root”;（别忘了最后加分号)</li>
<li>刷新权限（必须步骤）：flush privileges; </li>
<li>退出 quit</li>
<li>将第3 步的 my.ini里的 skip_grant_tables  去掉（启动MySQL服务的时候不能让他跳过权限表认证 ）</li>
<li>重启MySQL ，再进入，使用用户名root和刚才设置的新密码123就可以登录了。 </li>
</ul>
<ol>
<li>MySQL5.7更改密码时出现ERROR 1054 (42S22): Unknown column ‘password’ in ‘field list’.<br>新安装的MySQL5.7，登录时提示密码错误，安装的时候并没有更改密码，后来通过免密码登录的方式更改密码，输入update mysql.user  set password=password(‘123’) where user=’root’时提示ERROR 1054 (42S22): Unknown column ‘password’ in ‘field list’，<br>原因:原来是mysql数据库下已经没有password这个字段了，password字段改成了authentication_string.<br>解决方法:update user set authentication_string=password(“123”) where user=”root”;（别忘了最后加分号)</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://arvin-he.github.io/2017/04/06/http-note1-2017-04-06/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arvin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simple & Freedom">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/06/http-note1-2017-04-06/" itemprop="url">Http读书笔记第一章</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T22:35:06+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-一些名词概念"><a href="#1-一些名词概念" class="headerlink" title="1. 一些名词概念"></a>1. 一些名词概念</h3><ol>
<li>HTTP（HyperText Transfer Protocol，超文本传输协议</li>
<li>URL（Uniform Resource Locator，统一资源定位符）</li>
<li>URI 是 Uniform Resource Identifier 的缩写,统一资源标识符</li>
<li>TCP/IP 是互联网相关的各类协议族的总称</li>
<li>RFC（Request for Comments，征求修正意见书）RFC 是<br>互联网的设计文档，要是不按照 RFC 标准执行，就有可能导致无<br>法通信的状况。</li>
</ol>
<h3 id="2-TCP-IP分层"><a href="#2-TCP-IP分层" class="headerlink" title="2. TCP/IP分层"></a>2. TCP/IP分层</h3><p>TCP/IP 协议族按层次分别分为以下 4 层：应用层、传输层、网络层和数据链路层</p>
<ol>
<li>应用层:决定了向用户提供应用服务时通信的活动.TCP/IP 协议族内预存了各类通用的应用服务。比如，FTP（File Transfer Protocol，文件传输协议）和 DNS（Domain Name System，域名系统）服务就是其中两类。HTTP 协议也处于该层。</li>
<li>传输层:传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报协议）。</li>
<li>网络层:网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。</li>
<li>链路层(网络接口层):用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等<br>物理可见部分（还包括连接器等一切传输媒介）。硬件上的范畴均在链路层的作用范围之内。</li>
</ol>
<h3 id="3-与-HTTP-关系密切的协议-IP、TCP-和DNS"><a href="#3-与-HTTP-关系密切的协议-IP、TCP-和DNS" class="headerlink" title="3. 与 HTTP 关系密切的协议 : IP、TCP 和DNS"></a>3. 与 HTTP 关系密切的协议 : IP、TCP 和DNS</h3><ol>
<li><p>IP协议<br>IP 协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和 MAC地址（Media Access Control Address）。IP 地址指明了节点被分配到的地址，MAC 地址是指网卡所属的固定地址。IP 地址可以和 MAC 地址进行配对。IP 地址可变换，但 MAC地址基本上不会更改。使用 ARP 协议凭借 MAC 地址进行通信,IP 间的通信依赖 MAC 地址。在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的 MAC地址来搜索下一个中转目标。这时，会采用 ARP 协议（Address Resolution Protocol）。ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只能获悉很粗略的传输路线。这种机制称为路由选择（routing）.</p>
</li>
<li><p>TCP协议<br>TCP 位于传输层，提供可靠的字节流服务,所谓的字节流服务（Byte Stream Service）是指，为了方便传输，将大块数据分割成以报文段（segment）为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传给对方。为了准确无误地将数据送达目标处，TCP 协议采用了三次握手（three-way handshaking）策略。用 TCP 协议把数据包送出去后，TCP不会对传送后的情况置之不理，它一定会向对方确认是否成功送达。握手过程中使用了 TCP 的标志（flag） —— SYN（synchronize） 和ACK（acknowledgement）。发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。最后，发送端再回传一个带 ACK 标志的数据包，代表“握手”结束。若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发送相同的数据包。除了上述三次握手，TCP 协议还有其他各种手段来保证通信的可靠性。</p>
</li>
<li><p>DNC服务协议<br>DNS（Domain Name System）服务是和 HTTP 协议一样位于应用层的协议。它提供域名到 IP 地址之间的解析服务。DNS 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。</p>
</li>
</ol>
<h3 id="4-URI-统一资源标识符"><a href="#4-URI-统一资源标识符" class="headerlink" title="4. URI(统一资源标识符)"></a>4. URI(统一资源标识符)</h3><p>URI 就是由某个协议方案表示的资源的定位标识符。协议方案是指访问资源所使用的协议类型名称。URI 用字符串标识某一互联网资源，而 URL 表示资源的地点（互联<br>网上所处的位置）。可见 URL 是 URI 的子集。</p>
<p>使用 http: 或 https: 等协议方案名获取访问资源时要指定协议类型。不区分字母大小写，最后附一个冒号（:）。也可使用 data: 或 javascript: 这类指定数据或脚本程序的方案名。</p>
<p>登录信息（认证）<br>指定用户名和密码作为从服务器端获取资源时必要的登录信息（身份认证）。此项是可选项。</p>
<p>服务器地址<br>使用绝对 URI 必须指定待访问的服务器地址。地址可以是类似hackr.jp 这种 DNS 可解析的名称，或是 192.168.1.1 这类 IPv4 地址名，还可以是 [0:0:0:0:0:0:0:1] 这样用方括号括起来的 IPv6 地址名。</p>
<p>服务器端口号<br>指定服务器连接的网络端口号。此项也是可选项，若用户省略则自动使用默认端口号。</p>
<p>带层次的文件路径<br>指定服务器上的文件路径来定位特指的资源。这与 UNIX 系统的文件目录结构相似。</p>
<p>查询字符串<br>针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数。此项可选。</p>
<p>片段标识符<br>使用片段标识符通常可标记出已获取资源中的子资源（文档内的某个位置）。但在 RFC 中并没有明确规定其使用方法。该项也为可选项。</p>
<h3 id="5-其他"><a href="#5-其他" class="headerlink" title="5.其他"></a>5.其他</h3><ul>
<li>1997 年 1 月公布的 HTTP/1.1 是目前主流的 HTTP 协议版本</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Arvin</p>
              <p class="site-description motion-element" itemprop="description">Learn and live.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">141</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Arvin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
